<% expanded = false unless defined? expanded %>

<div class="card" id="course-<%= course.id %>" onclick="toggleSections(this)">
    <div class="card-body">
	<div style="display: flex; justify-content: space-between">
	    <h3 id="title"><%= "#{course.subject} #{course.course_number}" %></h3>
	    <div style="display: flex; flex-direction: column; justify-content: center;">
		<div style="display: flex">
		    <h5><em><%= course.title %></em>. <%= course.credits %> credits.</h5>
		    &nbsp;&nbsp;&nbsp;
		    <h4 id="add-course-btn" onclick="addCourse(event, '<%= course.id %>');">
			<i class="fas fa-plus" style="color: green"></i>
		    </h4>
		</div>
	    </div>
	</div>

	<div style="clear: both"> </div>

	<p class="description"><%= course.description %></p>

	<% unless course.prereqs.nil? || course.prereqs.empty? %>
	    <% first, rest = course.prereqs.split(':') %>
	    <% prereqs, note = rest.split('.') %>
	    <p><strong><%= first %>:</strong> <%= prereqs %> <sub><%= note %></sub></p>
	<% end %>

	<div class="d-block" style="text-align: center">
	    <p style="margin-bottom:-4px; font-size: 10px;">Expand</p>
	    <i class="fas fa-chevron-down"></i>
	</div>

	<!-- List of Course Sections -->
	<ul class="list-group list-group-flush" id="sections" style="display: <%= expanded ? "block" : "none" %>">
	    <% if defined?(@instructor) %>
		<%= render partial: 'shared/section', collection: course.course_sections.where(instructor: @instructor), locals: {course: course} %>
	    <% else %>
		<%= render partial: 'shared/section', collection: course.course_sections, locals: {course: course} %>
	    <% end %>
	</ul>
    </div>
</div>
